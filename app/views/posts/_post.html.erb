<div class="post">
  <h2>
    <u><%= post.user.name %></u>
    <small>Category: <%= post.category.title %></small>
    <i id="<%= post.id %>" class="glyphicon glyphicon-chevron-down pull-right closeBroad close"></i>
  </h2>
  <div id="<%= post.id %>a">
    <p class="date">
      <small>
        <i><%= post.created_at.strftime("%A, %B #{post.created_at.day.ordinalize} - %l:%M%P") %></i>
      </small>
      <%= link_to "", like_post_path(post), method: :put,:class=>'glyphicon glyphicon-hand-right likes'%>  <%= post.likes.count %>
    </p>
    <p class="body"><%= post.body %></p>
   <hr class="postComments">
    <p class="col-sm-offset-3"><%= image_tag(post.image_url, :width => "70%", class:"picture") if post.image_url.present? %></p>
    
      
    <div id="<%= post.id %>x" class="hideComments"><small><%=post.comments.length%> Comments</small></div>
      <div id="<%= post.id %>y" class="theComments">
        <hr class="hrComments">
        <% post.comments.each do |comment| %>
            <%= render comment %>
            <hr class="hrComments">
        <% end %>
    </div>
     <hr class="postComments">
    <%= render partial: 'create_comment', locals: { post: post } %> 

  </div>
 </div> 
<script>
  var alertFlag = true;
  $("#<%= post.id %>").click(function(){
      $("#<%= post.id %>a").toggle();
      if(alertFlag){
      $('#<%= post.id %>a').hide();
      $('#<%= post.id %>').removeClass('glyphicon glyphicon-chevron-up pull-right closeBroad').addClass('glyphicon glyphicon-chevron-down pull-right closeBroad');
      alertFlag = false;
      return;
    }else{
      $('#<%= post.id %>a').show();
      $('#<%= post.id %>').removeClass('glyphicon glyphicon-chevron-down pull-right closeBroad').addClass('glyphicon glyphicon-chevron-up pull-right closeBroad');
      alertFlag = true;
      return;
    }
  })
  $('#<%= post.id %>x').click(function(){
      $('#<%= post.id %>y').toggle();
  })
</script>

